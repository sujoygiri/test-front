<div class="auth-container">
    <div class="auth-toggle">
        <button [class.active]="isSignup" (click)="isSignup = true">Sign Up</button>
        <button [class.active]="!isSignup" (click)="isSignup = false">Sign In</button>
    </div>
    @if (isSignup) {
        <form class="auth-form" [formGroup]="signupForm" (ngSubmit)="onSignup()">
            <h2>Sign Up</h2>
            <input type="text" placeholder="Name" formControlName="name" required>
            <input type="email" placeholder="Email" formControlName="email" required>
            <input type="password" placeholder="Password" formControlName="password" required>
            <button type="submit">Create Account</button>
        </form>
    } @else {
        <form class="auth-form" [formGroup]="signinForm" (ngSubmit)="onSignin()">
            <h2>Sign In</h2>
            <input type="email" placeholder="Email" formControlName="email" required>
            <input type="password" placeholder="Password" formControlName="password" required>
            <button type="submit">Login</button>
        </form>
    }
    <!-- Show error message if present -->
    @if (errorMsg) {
        <div style="color: #d32f2f; text-align: center; margin-top: 12px;">{{ errorMsg }}</div>
    }
    <!-- Show user data if present -->
    @if (userData) {
        <div style="background: #e6f4ea; color: #256029; border-radius: 8px; margin-top: 16px; padding: 16px;">
            <h3 style="margin: 0 0 8px 0;">User Data</h3>
            <pre style="margin: 0; font-size: 14px;">{{ userData | json }}</pre>
        </div>
    }
    <!-- Button to open modal for user data -->
    <div style="text-align:center; margin-top: 24px;">
        <button (click)="openUserDataModal()" style="padding: 10px 20px; font-size: 15px; background: #0078d4; color: #fff; border: none; border-radius: 6px; cursor: pointer;">Show User Data (Modal)</button>
    </div>

    <!-- Modal Popup -->
    @if (showModal()) {
        <div style="position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.35); display: flex; align-items: center; justify-content: center; z-index: 1000;">
            <div style="background: #fff; border-radius: 12px; padding: 32px 24px; min-width: 320px; max-width: 90vw; box-shadow: 0 8px 32px rgba(0,0,0,0.18); position: relative;">
                <button (click)="closeModal()" style="position: absolute; top: 12px; right: 12px; background: none; border: none; font-size: 22px; color: #888; cursor: pointer;">&times;</button>
                <h3 style="margin-top: 0; color: #0078d4;">User Data</h3>
                <pre style="margin: 0; font-size: 15px;">
                    @if (modalUserData.length > 0) {
                        {{ modalUserData[0] | json }}
                    } @else {
                        Loading...
                    }
                </pre>
            </div>
        </div>
    }
</div>

<style>
.auth-container {
    max-width: 350px;
    margin: 60px auto;
    padding: 32px 24px;
    background: #fff;
    border-radius: 16px;
    box-shadow: 0 4px 32px rgba(0,0,0,0.08);
    font-family: 'Segoe UI', Arial, sans-serif;
}
.auth-toggle {
    display: flex;
    justify-content: center;
    margin-bottom: 24px;
}
.auth-toggle button {
    flex: 1;
    padding: 12px 0;
    border: none;
    background: #f0f0f0;
    color: #333;
    font-size: 16px;
    cursor: pointer;
    border-radius: 8px 8px 0 0;
    transition: background 0.2s;
}
.auth-toggle button.active {
    background: #0078d4;
    color: #fff;
}
.auth-form {
    display: flex;
    flex-direction: column;
    gap: 16px;
}
.auth-form h2 {
    text-align: center;
    margin-bottom: 8px;
    color: #0078d4;
}
.auth-form input {
    padding: 12px;
    border: 1px solid #ddd;
    border-radius: 6px;
    font-size: 15px;
    outline: none;
    transition: border 0.2s;
}
.auth-form input:focus {
    border-color: #0078d4;
}
.auth-form button[type="submit"] {
    padding: 12px;
    background: #0078d4;
    color: #fff;
    border: none;
    border-radius: 6px;
    font-size: 16px;
    cursor: pointer;
    transition: background 0.2s;
}
.auth-form button[type="submit"]:hover {
    background: #005fa3;
}
</style>